/* Optimized font loading - moved to HTML for better LCP/FCP */

@import './styles/fonts.css';
@import './styles/markdown-theme.css';
@import './styles/preview-export.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Styles d'accessibilité améliorés */
* {
  box-sizing: border-box;
}

/* Focus visible amélioré pour l'accessibilité */
*:focus-visible {
  outline: 2px solid #2563eb !important;
  outline-offset: 2px !important;
  border-radius: 4px !important;
}

/* Pour les boutons - focus visible avec contraste élevé */
button:focus-visible {
  outline: 2px solid #2563eb !important;
  outline-offset: 2px !important;
  border-radius: 6px !important;
  box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1) !important;
}

/* Pour les inputs et textarea */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid #2563eb !important;
  outline-offset: 2px !important;
  border-color: #2563eb !important;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important;
}

/* Pour les liens */
a:focus-visible {
  outline: 2px solid #2563eb !important;
  outline-offset: 2px !important;
  border-radius: 4px !important;
}

/* Correction pour les pseudo-éléments de focus */
button::-moz-focus-inner {
  border: 0 !important;
}

button::-webkit-focus-inner {
  border: 0 !important;
}

/* Pour les navigateurs qui supportent :focus-visible */
button:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

body {
  margin: 0;
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',
    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  @apply bg-gray-50;
  /* Optimisation LCP : polices système pour le texte principal */
  font-display: swap;
}

/* Optimisation LCP : Inter seulement pour les titres */
h1, h2, h3, h4, h5, h6 {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  font-display: swap;
}

/* Conteneur principal pour limiter la largeur de l'application */
.app-container {
  margin: 0 auto;
  padding: 0 16px;
  width: 100%;
  max-width: 1280px;
  box-sizing: border-box;
}
@media (max-width: 1280px) {
  .app-container {
    padding: 0 12px;
  }
}
code {
  font-family:
    source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
}

.markdown-body {
  box-sizing: border-box;
  min-width: 200px;
  @apply mx-auto p-12;
}

@media (max-width: 767px) {
  .markdown-body {
    @apply p-4;
  }
}

/* Styles pour forcer le mode sombre sur l'aperçu markdown - TRÈS SPÉCIFIQUES */
.markdown-body[data-theme='dark'],
body:has([data-theme='dark']) .markdown-body,
[data-theme='dark'] .markdown-body {
  background-color: #1e1e2f !important;
  color: #e5e7eb !important;
}

/* Forcer tous les éléments enfants en mode sombre */
.markdown-body[data-theme='dark'] *,
body:has([data-theme='dark']) .markdown-body *,
[data-theme='dark'] .markdown-body * {
  color: #e5e7eb !important;
}

.markdown-body[data-theme='dark'] h1,
.markdown-body[data-theme='dark'] h2,
.markdown-body[data-theme='dark'] h3,
.markdown-body[data-theme='dark'] h4,
.markdown-body[data-theme='dark'] h5,
.markdown-body[data-theme='dark'] h6 {
  color: #f3f4f6 !important;
  border-bottom-color: #374151 !important;
}

.markdown-body[data-theme='dark'] p {
  color: #e5e7eb !important;
}

.markdown-body[data-theme='dark'] code {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

.markdown-body[data-theme='dark'] pre {
  background-color: #1f2937 !important;
  color: #e5e7eb !important;
  border-color: #374151 !important;
}

.markdown-body[data-theme='dark'] blockquote {
  color: #d1d5db !important;
  border-left-color: #6b7280 !important;
  background-color: #1f2937 !important;
}

.markdown-body[data-theme='dark'] table {
  background-color: #1f2937 !important;
  border-color: #374151 !important;
}

.markdown-body[data-theme='dark'] table th,
.markdown-body[data-theme='dark'] table td {
  border-color: #374151 !important;
}

.markdown-body[data-theme='dark'] table th {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

.markdown-body[data-theme='dark'] a {
  color: #60a5fa !important;
}

.markdown-body[data-theme='dark'] a:hover {
  color: #3b82f6 !important;
}

.markdown-body[data-theme='dark'] ul,
.markdown-body[data-theme='dark'] ol {
  color: #e5e7eb !important;
}

.markdown-body[data-theme='dark'] li {
  color: #e5e7eb !important;
}

.markdown-body[data-theme='dark'] hr {
  border-color: #374151 !important;
}

/* STYLES ULTRA-FORTS POUR FORCER LE MODE SOMBRE */
/* Target tous les éléments markdown dans n'importe quel contexte quand le parent est en mode dark */
body[data-theme='dark'] .markdown-body,
body[data-theme='dark'] .markdown-body *,
div[data-theme='dark'] .markdown-body,
div[data-theme='dark'] .markdown-body *,
[data-theme='dark'] .markdown-body,
[data-theme='dark'] .markdown-body *,
.markdown-body[data-theme='dark'],
.markdown-body[data-theme='dark'] * {
  color: #e5e7eb !important;
  background-color: transparent !important;
}

/* Forcer les fonds spécifiques - SÉLECTEURS RENFORCÉS */
body[data-theme='dark'] .markdown-body,
div[data-theme='dark'] .markdown-body,
[data-theme='dark'] .markdown-body,
.markdown-body[data-theme='dark'] {
  background-color: #1e1e2f !important;
}

body[data-theme='dark'] .markdown-body pre,
div[data-theme='dark'] .markdown-body pre,
[data-theme='dark'] .markdown-body pre,
.markdown-body[data-theme='dark'] pre {
  background-color: #1f2937 !important;
  border-color: #374151 !important;
}

body[data-theme='dark'] .markdown-body code,
div[data-theme='dark'] .markdown-body code,
[data-theme='dark'] .markdown-body code,
.markdown-body[data-theme='dark'] code {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

body[data-theme='dark'] .markdown-body blockquote,
div[data-theme='dark'] .markdown-body blockquote,
[data-theme='dark'] .markdown-body blockquote,
.markdown-body[data-theme='dark'] blockquote {
  background-color: #1f2937 !important;
  border-left-color: #6b7280 !important;
}

body[data-theme='dark'] .markdown-body table,
div[data-theme='dark'] .markdown-body table,
[data-theme='dark'] .markdown-body table,
.markdown-body[data-theme='dark'] table {
  background-color: #1f2937 !important;
  border-color: #374151 !important;
}

body[data-theme='dark'] .markdown-body table th,
div[data-theme='dark'] .markdown-body table th,
[data-theme='dark'] .markdown-body table th,
.markdown-body[data-theme='dark'] table th {
  background-color: #374151 !important;
  color: #f9fafb !important;
}

/* Forcer les couleurs de texte spécifiques - SÉLECTEURS RENFORCÉS */
body[data-theme='dark'] .markdown-body h1,
body[data-theme='dark'] .markdown-body h2,
body[data-theme='dark'] .markdown-body h3,
body[data-theme='dark'] .markdown-body h4,
body[data-theme='dark'] .markdown-body h5,
body[data-theme='dark'] .markdown-body h6,
div[data-theme='dark'] .markdown-body h1,
div[data-theme='dark'] .markdown-body h2,
div[data-theme='dark'] .markdown-body h3,
div[data-theme='dark'] .markdown-body h4,
div[data-theme='dark'] .markdown-body h5,
div[data-theme='dark'] .markdown-body h6,
[data-theme='dark'] .markdown-body h1,
[data-theme='dark'] .markdown-body h2,
[data-theme='dark'] .markdown-body h3,
[data-theme='dark'] .markdown-body h4,
[data-theme='dark'] .markdown-body h5,
[data-theme='dark'] .markdown-body h6,
.markdown-body[data-theme='dark'] h1,
.markdown-body[data-theme='dark'] h2,
.markdown-body[data-theme='dark'] h3,
.markdown-body[data-theme='dark'] h4,
.markdown-body[data-theme='dark'] h5,
.markdown-body[data-theme='dark'] h6 {
  color: #f3f4f6 !important;
  border-bottom-color: #374151 !important;
}

body[data-theme='dark'] .markdown-body a,
div[data-theme='dark'] .markdown-body a,
[data-theme='dark'] .markdown-body a,
.markdown-body[data-theme='dark'] a {
  color: #60a5fa !important;
}

body[data-theme='dark'] .markdown-body a:hover,
div[data-theme='dark'] .markdown-body a:hover,
[data-theme='dark'] .markdown-body a:hover,
.markdown-body[data-theme='dark'] a:hover {
  color: #3b82f6 !important;
}
